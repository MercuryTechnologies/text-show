language: haskell

env:
  - GHCVER=7.4.2
  - GHCVER=7.6.3
  - GHCVER=7.8.3

install:
  - cabal update
  # There's a bug in double-conversion (https://github.com/bos/double-conversion/issues/8)
  # that seems to affect older versions of GHC, at least on Travis-CI's worker boxes. For
  # the time being, I will only run tests on GHC 7.8.3 so that my builds will succeed.
  - |
    if [ $GHCVER = "7.8.3" ]; then
      $CABAL install -j --only-dependencies --enable-tests
    else
      $CABAL install -j --only-dependencies
    fi

script:
  # There's a bug in double-conversion (https://github.com/bos/double-conversion/issues/8)
  # that seems to affect older versions of GHC, at least on Travis-CI's worker boxes. For
  # the time being, I will only run tests on GHC 7.8.3 so that my builds will succeed.
  - |
    if [ $GHCVER = "7.8.3" ]; then
      $CABAL configure --enable-tests
      $CABAL build
      $CABAL test
    else
      $CABAL configure
      $CABAL build
    fi
